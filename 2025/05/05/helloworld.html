<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=df1d91ee601e793f5f3ba13a177f4669765bf47a">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup theme-color -->
<!-- start theme color meta headers -->
<meta name="theme-color" content="#151515">
<meta name="msapplication-navbutton-color" content="#151515">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- end theme color meta headers -->


<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->


<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Hello World! | working-as-designed</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Hello World!" />
<meta name="author" content="working-as-designed" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Experiences from security operations, engineering, incident response, and threat detection" />
<meta property="og:description" content="Experiences from security operations, engineering, incident response, and threat detection" />
<link rel="canonical" href="https://working-as-designed.github.io/2025/05/05/helloworld.html" />
<meta property="og:url" content="https://working-as-designed.github.io/2025/05/05/helloworld.html" />
<meta property="og:site_name" content="working-as-designed" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-05-05T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Hello World!" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"working-as-designed"},"dateModified":"2025-05-05T00:00:00+00:00","datePublished":"2025-05-05T00:00:00+00:00","description":"Experiences from security operations, engineering, incident response, and threat detection","headline":"Hello World!","mainEntityOfPage":{"@type":"WebPage","@id":"https://working-as-designed.github.io/2025/05/05/helloworld.html"},"url":"https://working-as-designed.github.io/2025/05/05/helloworld.html"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <header>
      <div class="container">
        <a id="a-title" href="/">
          <h1>working-as-designed</h1>
        </a>
        <h2>Experiences from security operations, engineering, incident response, and threat detection</h2>

        <section id="downloads">
          
          <a href="https://github.com/working-as-designed/working-as-designed.github.io" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <small>5 May 2025</small>
<h1>Hello World!</h1>

<p class="view">by working-as-designed</p>

<ul id="markdown-toc">
  <li><a href="#setup-of-this-web-log" id="markdown-toc-setup-of-this-web-log">Setup of this web log</a>    <ul>
      <li><a href="#use-jekyll" id="markdown-toc-use-jekyll">Use Jekyll</a></li>
      <li><a href="#create-the-github-repo" id="markdown-toc-create-the-github-repo">Create the github repo</a></li>
      <li><a href="#add-some-content-to-your-local-repo" id="markdown-toc-add-some-content-to-your-local-repo">Add some content to your local repo</a></li>
      <li><a href="#add-the-needful-to-the-gemfile" id="markdown-toc-add-the-needful-to-the-gemfile">Add the needful to the <code class="language-plaintext highlighter-rouge">Gemfile</code></a></li>
      <li><a href="#create-a-basic-_configyml" id="markdown-toc-create-a-basic-_configyml">Create a basic <code class="language-plaintext highlighter-rouge">_config.yml</code></a></li>
      <li><a href="#create-some-helper-scripts" id="markdown-toc-create-some-helper-scripts">Create some helper scripts</a>        <ul>
          <li><a href="#new-post-boilerplate" id="markdown-toc-new-post-boilerplate">New Post boilerplate</a></li>
          <li><a href="#generate-tag-pages" id="markdown-toc-generate-tag-pages">Generate tag pages</a></li>
        </ul>
      </li>
      <li><a href="#create-your-home-page" id="markdown-toc-create-your-home-page">Create your home page</a></li>
      <li><a href="#install-lefthook-on-ubuntu" id="markdown-toc-install-lefthook-on-ubuntu">Install lefthook (on ubuntu)</a>        <ul>
          <li><a href="#add-some-pre-commit-scripts" id="markdown-toc-add-some-pre-commit-scripts">Add some pre-commit scripts</a></li>
          <li><a href="#does-your-front-matter-exist" id="markdown-toc-does-your-front-matter-exist">Does your front matter exist?</a></li>
          <li><a href="#are-your-image-paths-valid" id="markdown-toc-are-your-image-paths-valid">Are your image paths valid?</a></li>
          <li><a href="#do-you-need-to-updategenerate-tag-pages" id="markdown-toc-do-you-need-to-updategenerate-tag-pages">Do you need to update/generate tag pages?</a></li>
        </ul>
      </li>
      <li><a href="#add-some-pre-push-scripts" id="markdown-toc-add-some-pre-push-scripts">Add some pre-push scripts</a>        <ul>
          <li><a href="#does-your-blog-build" id="markdown-toc-does-your-blog-build">Does your blog build?</a></li>
        </ul>
      </li>
      <li><a href="#configuring-lefthook-to-run-your-new-scripts" id="markdown-toc-configuring-lefthook-to-run-your-new-scripts">Configuring lefthook to run your new scripts</a></li>
      <li><a href="#check-your-deployment-method" id="markdown-toc-check-your-deployment-method">Check your deployment method</a></li>
    </ul>
  </li>
  <li><a href="#setup-conclusion" id="markdown-toc-setup-conclusion">Setup Conclusion</a></li>
</ul>

<p><strong>Edit from the future:</strong> I‚Äôve rewritten or removed most of the jekyll setup portions that are no longer relevant to this blog.</p>

<p>This post is more of a test post than anything else, but welcome to my web log! Experience has taught me that computers are pain and that memory is fickle, I‚Äôm writing these posts with myself as the primary audience and I‚Äôm publishing them so that maybe they can help somebody else out.</p>

<p>Here‚Äôs some things to know about me that (hopefully) will shine through in the blog posts to come:</p>

<ol>
  <li>I‚Äôm not a smart person, but I ain‚Äôt no dumbass. I get by.
    <ul>
      <li>I make mistakes. A lot of them. Sometimes I choose to work inefficiently, sometimes I just don‚Äôt know no better. I always reserve the right to be wrong, so take nothing here as gospel, <strong>think critically</strong>. If the content works for your situation, great!</li>
      <li>I intend to spell everything out plainly in my writing. If it‚Äôs an instructional, I‚Äôll put the exact tools I used, the steps I took, the commands I entered to arrive at the end state. If I don‚Äôt, get at me, I‚Äôll do my best to update the content.</li>
      <li>I‚Äôm an iterator and collaborator, I recognise good things and modify them to my own purposes. Rarely if ever, will I be posting about something novel and new. I like for things to just work until the thing is dead, and it‚Äôs time to fashion a replacement. I‚Äôm not trying to work harder than I have to, I‚Äôm a bit of a luddite, if it works then it works. It‚Äôs the way of my people.</li>
    </ul>
  </li>
  <li>I suffer from good intentions.
    <ul>
      <li>Sometimes my eyes are bigger than my stomach. I‚Äôll try my best to only write about things that are done, never teasing work to come. A lot of blogs on the internet read like sprints, highly active for a few years and then the author‚Äôs attention moves on to other things. I‚Äôm only human and I‚Äôm planning to be one‚Ä¶</li>
    </ul>
  </li>
  <li>It‚Äôs all a work in progress, your inputs are welcomed.
    <ul>
      <li>I‚Äôm never (lol, ‚Äúnever say never‚Äù) going to add any kind of commenting feature here. But if you know or can find a way to contact me, I‚Äôd love to hear what you have to say about the post.</li>
      <li>Thinking about it a little, that‚Äôs probably best facilitated through issues, pull requests?, or any contact info that may, or may not be associated to my profile.</li>
    </ul>
  </li>
</ol>

<p><img src="/assets/images/2025/05/helloworld/hello_pikachu.png" alt="pika" /></p>

<hr />

<h2 id="setup-of-this-web-log">Setup of this web log</h2>

<p>Like all my programming these days, I started with GPT. I‚Äôll save you all the errors that it made, and stick to the salient points.</p>

<h3 id="use-jekyll">Use Jekyll</h3>

<ul>
  <li><strong>Why?</strong> It‚Äôs easy, it‚Äôs static content, it‚Äôs a relatively ancient tool, and it works with github pages. That‚Äôs all we need for now. It‚Äôs powered by Ruby! ü§Æ
    <ul>
      <li>Ruby‚Äôs mostly fine, I just came up in it‚Äôs era of competition with Python, and I chose my champion early.</li>
    </ul>
  </li>
</ul>

<h3 id="create-the-github-repo">Create the github repo</h3>

<ul>
  <li>For me, its <code class="language-plaintext highlighter-rouge">working-as-designed.github.io</code>. Wow! nobody claimed it already. <em>So lucky.</em></li>
</ul>

<h3 id="add-some-content-to-your-local-repo">Add some content to your local repo</h3>

<p>You‚Äôll want these at least, but probably more depending on how fancy you get with custom theming. I ended up settleing in on the github-pages theme <code class="language-plaintext highlighter-rouge">hacker</code> because it does most everything i want and the colorscheme is mostly nonoffensive to me.</p>

<p>These are the bare minimum files you‚Äôll need to get started. I‚Äôd be shocked if jekyll couldn‚Äôt start a new site with boilerplate for you, but I handcrafted these:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Gemfile</code></li>
  <li><code class="language-plaintext highlighter-rouge">_config.yml</code></li>
  <li><code class="language-plaintext highlighter-rouge">index.html</code></li>
  <li><code class="language-plaintext highlighter-rouge">_posts/</code></li>
  <li><code class="language-plaintext highlighter-rouge">assets/</code></li>
</ul>

<h3 id="add-the-needful-to-the-gemfile">Add the needful to the <code class="language-plaintext highlighter-rouge">Gemfile</code></h3>

<p>These are the imports that github will need to be making on our behalf.</p>

<pre><code class="language-txt">source "https://rubygems.org"

gem "jekyll"

# Plugins
gem "faraday-retry"
gem "jekyll-feed"
gem "jekyll-remote-theme"
gem "jekyll-seo-tag"
gem "github-pages", group: :jekyll_plugins
</code></pre>

<h3 id="create-a-basic-_configyml">Create a basic <code class="language-plaintext highlighter-rouge">_config.yml</code></h3>

<p>This is an ultra-basic configuration, cause we keep it simple babyyy. we can do fancy things later.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">working-as-designed"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Experiences</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">security</span><span class="nv"> </span><span class="s">operations,</span><span class="nv"> </span><span class="s">engineering,</span><span class="nv"> </span><span class="s">incident</span><span class="nv"> </span><span class="s">response,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">threat</span><span class="nv"> </span><span class="s">detection"</span>
<span class="na">author</span><span class="pi">:</span> <span class="s2">"</span><span class="s">working-as-designed"</span>
<span class="na">baseurl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
<span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://working-as-designed.github.io"</span>
<span class="na">remote_theme</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pages-themes/hacker@v0.2.0"</span>

<span class="na">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">jekyll-remote-theme"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">jekyll-feed"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">jekyll-seo-tag"</span>
</code></pre></div></div>

<h3 id="create-some-helper-scripts">Create some helper scripts</h3>

<p>Someday (probably soon) I‚Äôll move these into a dedicated directory.</p>

<h4 id="new-post-boilerplate">New Post boilerplate</h4>

<ul>
  <li>Woah! A python dependency? <strong>yeah, I think we need to manage a venv</strong>. I Don‚Äôt wanna keep cluttering this post with more code you can reference in the repository, but check out the <code class="language-plaintext highlighter-rouge">Makefile</code> and <code class="language-plaintext highlighter-rouge">requirements.txt</code></li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">slugify</span><span class="p">(</span><span class="n">title</span><span class="p">):</span>
    <span class="c1"># Convert to lowercase, remove non-word characters, and replace spaces with dashes
</span>    <span class="k">return</span> <span class="n">re</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s">'[^a-z0-9]+'</span><span class="p">,</span> <span class="s">'-'</span><span class="p">,</span> <span class="n">title</span><span class="p">.</span><span class="n">lower</span><span class="p">()).</span><span class="n">strip</span><span class="p">(</span><span class="s">'-'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">create_post</span><span class="p">(</span><span class="n">title</span><span class="p">):</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">year</span> <span class="o">=</span> <span class="n">today</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y"</span><span class="p">)</span>
    <span class="n">month</span> <span class="o">=</span> <span class="n">today</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%m"</span><span class="p">)</span>
    <span class="n">day</span> <span class="o">=</span> <span class="n">today</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%d"</span><span class="p">)</span>

    <span class="n">slug</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s">-</span><span class="si">{</span><span class="n">month</span><span class="si">}</span><span class="s">-</span><span class="si">{</span><span class="n">day</span><span class="si">}</span><span class="s">-</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s">.md"</span>
    <span class="n">post_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s">"_posts"</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="n">asset_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s">"assets"</span><span class="p">,</span> <span class="s">"images"</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">slug</span><span class="p">)</span>

    <span class="c1"># Make directories if needed
</span>    <span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">asset_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1"># Markdown front matter template
</span>    <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"""---
layout: post
title: "</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s">"
date: </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s">-</span><span class="si">{</span><span class="n">month</span><span class="si">}</span><span class="s">-</span><span class="si">{</span><span class="n">day</span><span class="si">}</span><span class="s">
tags: []
---

![Alt text](/assets/images/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">month</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s">/image.png)

Write your content here.
"""</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">post_path</span><span class="p">,</span> <span class="s">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"‚úî Created post: </span><span class="si">{</span><span class="n">post_path</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"‚úî Created asset folder: </span><span class="si">{</span><span class="n">asset_path</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Usage: python newpost.py </span><span class="se">\"</span><span class="s">Post Title Here</span><span class="se">\"</span><span class="s">"</span><span class="p">)</span>
        <span class="n">sys</span><span class="p">.</span><span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">title</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">create_post</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="generate-tag-pages">Generate tag pages</h4>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">slugify</span> <span class="kn">import</span> <span class="n">slugify</span>  <span class="c1"># pip install python-slugify
</span>
<span class="n">POSTS_DIR</span> <span class="o">=</span> <span class="s">"_posts"</span>
<span class="n">TAGS_DIR</span> <span class="o">=</span> <span class="s">"tags"</span>

<span class="k">def</span> <span class="nf">extract_tags_from_post</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">'r'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">content</span><span class="p">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">"---"</span><span class="p">):</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">content</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">"---"</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">end</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">front_matter</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">metadata</span> <span class="o">=</span> <span class="n">yaml</span><span class="p">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">front_matter</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">metadata</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'tags'</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">except</span> <span class="n">yaml</span><span class="p">.</span><span class="n">YAMLError</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"‚ö†Ô∏è Failed to parse YAML in: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">collect_all_tags</span><span class="p">():</span>
    <span class="n">tag_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">POSTS_DIR</span><span class="si">}</span><span class="s">/*.md"</span><span class="p">):</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="n">extract_tags_from_post</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
            <span class="n">tag_slug</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
            <span class="n">tag_map</span><span class="p">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">tag_slug</span><span class="p">,</span> <span class="p">{</span>
                <span class="s">"name"</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
                <span class="s">"posts"</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">})</span>
            <span class="n">tag_map</span><span class="p">[</span><span class="n">tag_slug</span><span class="p">][</span><span class="s">"posts"</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tag_map</span>

<span class="k">def</span> <span class="nf">generate_tag_pages</span><span class="p">(</span><span class="n">tag_map</span><span class="p">):</span>
    <span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">TAGS_DIR</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">slug</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">tag_map</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">tag_filename</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">TAGS_DIR</span><span class="p">,</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s">.html"</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tag_filename</span><span class="p">,</span> <span class="s">'w'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s">"""---
layout: default
title: "Posts tagged with '</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span><span class="si">}</span><span class="s">'"
tag: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span><span class="si">}</span><span class="s">
permalink: /tags/</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s">.html
---

&lt;!-- This page is auto-generated --&gt;

&lt;ul&gt;
{{% for post in site.posts %}}
{{% if post.tags contains '</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span><span class="si">}</span><span class="s">' %}}
    &lt;li&gt;&lt;a href="{{{{ post.url }}}}"&gt;{{{{ post.title }}}}&lt;/a&gt; ({{{{ post.date | date: "%Y-%m-%d" }}}})&lt;/li&gt;
{{% endif %}}
{{% endfor %}}
&lt;/ul&gt;
"""</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"üëç Created tag page: </span><span class="si">{</span><span class="n">tag_filename</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">tag_map</span> <span class="o">=</span> <span class="n">collect_all_tags</span><span class="p">()</span>
    <span class="n">generate_tag_pages</span><span class="p">(</span><span class="n">tag_map</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"‚úÖ All tag pages generated successfully."</span><span class="p">)</span>

</code></pre></div></div>

<p><strong>Now make our scripts executable with <code class="language-plaintext highlighter-rouge">chmod +x</code></strong></p>

<h3 id="create-your-home-page">Create your home page</h3>

<p>In your <code class="language-plaintext highlighter-rouge">index.html</code> file, put down some basic content. Here‚Äôs enough to show your posts to readers and allow them to dig through your tagged content.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
title: Home
---

<span class="nt">&lt;h1&gt;</span>üìù Latest Posts<span class="nt">&lt;/h1&gt;</span>

{% if site.posts.size &gt; 0 %}
<span class="nt">&lt;ul&gt;</span>
  {% for post in site.posts %}
    <span class="nt">&lt;li&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ post.url | relative_url }}"</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;small&gt;</span>{{ post.date | date: "%b %d, %Y" }}<span class="nt">&lt;/small&gt;</span>

      {% if post.tags %}
        <span class="nt">&lt;div&gt;</span>
          üè∑ Tags:
          {% for tag in post.tags %}
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ '/tags/' | append: tag | slugify | append: '.html' | relative_url }}"</span><span class="nt">&gt;</span>{{ tag }}<span class="nt">&lt;/a&gt;</span>{% unless forloop.last %}, {% endunless %}
          {% endfor %}
        <span class="nt">&lt;/div&gt;</span>
      {% endif %}
    <span class="nt">&lt;/li&gt;</span>
  {% endfor %}
<span class="nt">&lt;/ul&gt;</span>
{% else %}
<span class="nt">&lt;p&gt;&lt;em&gt;</span>No posts found. Check back later!<span class="nt">&lt;/em&gt;&lt;/p&gt;</span>
{% endif %}

<span class="nt">&lt;h2&gt;</span>üîñ All Tags<span class="nt">&lt;/h2&gt;</span>
{% if site.tags %}
<span class="nt">&lt;ul&gt;</span>
  {% assign tags = site.tags | sort %}
  {% for tag in tags %}
    <span class="nt">&lt;li&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ '/tags/' | append: tag[0] | append: '.html' | relative_url }}"</span><span class="nt">&gt;</span>{{ tag[0] }}<span class="nt">&lt;/a&gt;</span> ({{ tag[1].size }})
    <span class="nt">&lt;/li&gt;</span>
  {% endfor %}
<span class="nt">&lt;/ul&gt;</span>
{% else %}
<span class="nt">&lt;p&gt;&lt;em&gt;</span>No tags available.<span class="nt">&lt;/em&gt;&lt;/p&gt;</span>
{% endif %}
</code></pre></div></div>

<h3 id="install-lefthook-on-ubuntu">Install lefthook (on ubuntu)</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">curl -1sLf 'https://dl.cloudsmith.io/public/evilmartians/lefthook/setup.deb.sh' | sudo -E bash; sudo apt install lefthook</code>
    <ul>
      <li>Yeah, curlbashing is definitely not great. but sometimes, ya gotta do it. audit the code first and develop a sense of (dis)trust.</li>
    </ul>
  </li>
  <li>At the time of this writing, I‚Äôm using version <code class="language-plaintext highlighter-rouge">1.11.12</code>, and GPT is ALL OVER THE PLACE with its‚Äô suggestions about it. Beware.</li>
  <li>Check out <a href="https://github.com/working-as-designed/working-as-designed.github.io/tree/main/.lefthook">the repo for this site</a> to see future additions.</li>
  <li>
    <p><strong>Run <code class="language-plaintext highlighter-rouge">lefthook install</code> in the repo</strong></p>
  </li>
  <li>If lefthook ain‚Äôt doing shit, you probably need to modify <code class="language-plaintext highlighter-rouge">/lefthook.yml</code>. We will return to this momentarily‚Ä¶</li>
</ul>

<h4 id="add-some-pre-commit-scripts">Add some pre-commit scripts</h4>

<p>In <code class="language-plaintext highlighter-rouge">.lefthook/pre-commit/</code>, add files for the following scripts:</p>

<h4 id="does-your-front-matter-exist">Does your front matter exist?</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"üîç Running front matter checks..."</span>

<span class="c"># Check YAML front matter in all Markdown posts</span>
<span class="k">for </span>file <span class="k">in</span> <span class="si">$(</span>git diff <span class="nt">--cached</span> <span class="nt">--name-only</span> | <span class="nb">grep</span> <span class="s1">'_posts/.*\.md$'</span><span class="si">)</span><span class="p">;</span> <span class="k">do
    if</span> <span class="o">!</span> <span class="nb">grep</span> <span class="nt">-q</span> <span class="s2">"^---"</span> <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"‚ùå Missing front matter in </span><span class="nv">$file</span><span class="s2">"</span>
        <span class="nb">exit </span>1
    <span class="k">fi
done

</span><span class="nb">echo</span> <span class="s2">"‚úÖ Front Matter looks good"</span>
</code></pre></div></div>

<h4 id="are-your-image-paths-valid">Are your image paths valid?</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"üîç Running image path validation check..."</span>

<span class="c"># Initialize a list to store validated images</span>
<span class="nv">validated_images</span><span class="o">=()</span>

<span class="c"># Check image references exist</span>
<span class="k">for </span>file <span class="k">in</span> <span class="si">$(</span>git diff <span class="nt">--cached</span> <span class="nt">--name-only</span> | <span class="nb">grep</span> <span class="s1">'_posts/.*\.md$'</span><span class="si">)</span><span class="p">;</span> <span class="k">do
    while </span><span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> <span class="nt">-r</span> line<span class="p">;</span> <span class="k">do</span>
        <span class="c"># Extract line number and image path</span>
        <span class="nv">line_number</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$line</span><span class="s2">"</span> | <span class="nb">cut</span> <span class="nt">-d</span>: <span class="nt">-f1</span><span class="si">)</span>
        <span class="nv">img</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$line</span><span class="s2">"</span> | <span class="nb">cut</span> <span class="nt">-d</span>: <span class="nt">-f2-</span><span class="si">)</span>

        <span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="s2">".</span><span class="nv">$img</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
            </span><span class="nb">echo</span> <span class="s2">"üëç Image validated: </span><span class="nv">$img</span><span class="s2"> (line </span><span class="nv">$line_number</span><span class="s2"> in </span><span class="nv">$file</span><span class="s2">)"</span>
            validated_images+<span class="o">=(</span><span class="s2">"</span><span class="nv">$img</span><span class="s2">"</span><span class="o">)</span>
        <span class="k">else
            </span><span class="nb">echo</span> <span class="s2">"üö® Warning: perceived image not found: </span><span class="nv">$img</span><span class="s2"> (line </span><span class="nv">$line_number</span><span class="s2"> in </span><span class="nv">$file</span><span class="s2">)"</span>
        <span class="k">fi
    done</span> &lt; &lt;<span class="o">(</span><span class="nb">grep</span> <span class="nt">-n</span> <span class="nt">-oP</span> <span class="s1">'!\[.*?\]\(\K.*?(?=\))'</span> <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span><span class="o">)</span>
<span class="k">done

</span><span class="nb">echo</span> <span class="s2">"‚úÖ Image path validation check complete."</span>
</code></pre></div></div>

<h4 id="do-you-need-to-updategenerate-tag-pages">Do you need to update/generate tag pages?</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"üîÅ Generating tag pages..."</span>
python3 generate_tag_pages.py

<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-ne</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"‚ùå Tag generation failed. Commit aborted."</span>
<span class="nb">exit </span>1
<span class="k">fi</span>

<span class="c"># Auto-add new tag files to the commit</span>
git add tags/<span class="k">*</span>.md

<span class="nb">echo</span> <span class="s2">"‚úÖ Tag pages updated and staged."</span>
</code></pre></div></div>

<h3 id="add-some-pre-push-scripts">Add some pre-push scripts</h3>

<p>In <code class="language-plaintext highlighter-rouge">.lefthook/pre-push/</code>, add a file for the following script:</p>

<h4 id="does-your-blog-build">Does your blog build?</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"üõ† Building site before push..."</span>

bundle <span class="nb">exec </span>jekyll build <span class="nt">--future</span> <span class="o">&gt;</span> /dev/null

<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-ne</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"‚ùå Jekyll build failed. Push aborted."</span>
    <span class="nb">exit </span>1
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"‚úÖ Jekyll build successful. Proceeding with push."</span>
<span class="k">fi</span>
</code></pre></div></div>

<p><strong>Make sure your new scripts are executable with another <code class="language-plaintext highlighter-rouge">chmod +x</code></strong></p>

<h3 id="configuring-lefthook-to-run-your-new-scripts">Configuring lefthook to run your new scripts</h3>

<p>Next, make sure <code class="language-plaintext highlighter-rouge">lefthook.yml</code> references your pre-commit/pre-push scripts</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">pre-commit</span><span class="pi">:</span>
<span class="na">jobs</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">front_matter_check</span>
    <span class="na">run</span><span class="pi">:</span>
        <span class="s">.lefthook/pre-commit/front_matter_check.sh</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">valid_images_check</span>
    <span class="na">run</span><span class="pi">:</span>
        <span class="s">.lefthook/pre-commit/valid_images_check.sh</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">tag_page_creation</span>
    <span class="na">run</span><span class="pi">:</span>
        <span class="s">.lefthook/pre-commit/tag_page_creation.sh</span>

<span class="na">pre-push</span><span class="pi">:</span>
<span class="na">jobs</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">build_site</span>
    <span class="na">run</span><span class="pi">:</span>
        <span class="s">.lefthook/pre-push/build_site.sh</span>
</code></pre></div></div>

<h3 id="check-your-deployment-method">Check your deployment method</h3>

<p>This blog is built from the repo using github actions, this is the definition that‚Äôs working for me. <strong>MAKE SURE</strong> that your pages settings for the repository are correct. You want to be deploying from a branch called <code class="language-plaintext highlighter-rouge">gh-pages</code>, make it if you don‚Äôt have one. I‚Äôm using <code class="language-plaintext highlighter-rouge">/ (root)</code> as my folder because it seemed right at the beginning when I didn‚Äôt know what I was doing.</p>

<ul>
  <li><strong>TURNS OUT</strong>, the theme I‚Äôm using assumes a <code class="language-plaintext highlighter-rouge">docs/</code> directory, so I needed to go back and rework my config to use a remote-theme. You live, you fuck up a lot, sometimes you learn.</li>
  <li>Make sure you have a deploy file at <code class="language-plaintext highlighter-rouge">.github/workflows/deploy.yml</code> to tell github actions that we need to execute jekyll on the repo contents, and serve the output</li>
</ul>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Build</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">Deploy</span><span class="nv"> </span><span class="s">Jekyll"</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">main"</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build-deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ubuntu-latest"</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s2">"</span><span class="s">actions/checkout@v3"</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Setup</span><span class="nv"> </span><span class="s">Ruby"</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby/setup-ruby@v1"</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">ruby-version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.1"</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Install</span><span class="nv"> </span><span class="s">dependencies"</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">gem install bundler</span>
          <span class="s">bundle install</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Build</span><span class="nv"> </span><span class="s">site"</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s2">"</span><span class="s">bundle</span><span class="nv"> </span><span class="s">exec</span><span class="nv"> </span><span class="s">jekyll</span><span class="nv"> </span><span class="s">build</span><span class="nv"> </span><span class="s">-d</span><span class="nv"> </span><span class="s">_site"</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">GitHub</span><span class="nv"> </span><span class="s">Pages"</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s2">"</span><span class="s">peaceiris/actions-gh-pages@v3"</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">github_token</span><span class="pi">:</span> <span class="s2">"</span><span class="s">$"</span>
          <span class="na">publish_dir</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./_site"</span>
          <span class="na">force_orphan</span><span class="pi">:</span> <span class="no">true</span>
          <span class="na">keep_files</span><span class="pi">:</span> <span class="no">false</span>
</code></pre></div></div>

<h2 id="setup-conclusion">Setup Conclusion</h2>

<p>By now, hopefully you‚Äôre seeing fun outputs whenever you make new commits to the repo. Make sure to check your <code class="language-plaintext highlighter-rouge">git status</code> before pushing, you might need to commit newly auto-generated content.</p>

<ul>
  <li><strong>Important:</strong> I might‚Äôve missed some steps. I spent 12 hours off and on fighting Jekyll to get a successful deployment, I did my best to capture what is relevant in this post.
    <ul>
      <li><strong>Want things to go faster?</strong> Spend the time to <a href="https://jekyllrb.com/docs/">read the docs</a>, go through the step-by-step. Use that knowledge to craft your prompts.</li>
    </ul>
  </li>
  <li>I‚Äôve edited this post a few times to fix minor things: clarify some language, add links, fix broken formatting. Everything described here is mirrored in the repository, I‚Äôm just walking you through my process and justifying the decisions made. Take what you like, send me some feedback if you think I‚Äôm egregiously messing things up or otherwise could be doing things easier.</li>
  <li><strong>Big edit from the future:</strong> most of the content from this post has been condensed into the repo‚Äôs <code class="language-plaintext highlighter-rouge">CONTRIBUTING.md</code> file. You should probably start there.</li>
</ul>



  <small>tags: <em>helloworld</em> - <em>jekyll</em></small>


      </section>
    </div>
  </body>
</html>
